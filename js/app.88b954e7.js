(function(t){function o(o){for(var a,i,n=o[0],c=o[1],l=o[2],u=0,d=[];u<n.length;u++)i=n[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);h&&h(o);while(d.length)d.shift()();return s.push.apply(s,l||[]),e()}function e(){for(var t,o=0;o<s.length;o++){for(var e=s[o],a=!0,i=1;i<e.length;i++){var c=e[i];0!==r[c]&&(a=!1)}a&&(s.splice(o--,1),t=n(n.s=e[0]))}return t}var a={},r={app:0},s=[];function i(t){return n.p+"js/"+({about:"about"}[t]||t)+"."+{about:"01fe9b33"}[t]+".js"}function n(o){if(a[o])return a[o].exports;var e=a[o]={i:o,l:!1,exports:{}};return t[o].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.e=function(t){var o=[],e=r[t];if(0!==e)if(e)o.push(e[2]);else{var a=new Promise((function(o,a){e=r[t]=[o,a]}));o.push(e[2]=a);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,n.nc&&c.setAttribute("nonce",n.nc),c.src=i(t);var l=new Error;s=function(o){c.onerror=c.onload=null,clearTimeout(u);var e=r[t];if(0!==e){if(e){var a=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",l.name="ChunkLoadError",l.type=a,l.request=s,e[1](l)}r[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(o)},n.m=t,n.c=a,n.d=function(t,o,e){n.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:e})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,o){if(1&o&&(t=n(t)),8&o)return t;if(4&o&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var a in t)n.d(e,a,function(o){return t[o]}.bind(null,a));return e},n.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(o,"a",o),o},n.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},n.p="/vuejs-app-search-photo/",n.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=o,c=c.slice();for(var u=0;u<c.length;u++)o(c[u]);var h=l;s.push([0,"chunk-vendors"]),e()})({0:function(t,o,e){t.exports=e("56d7")},"0534":function(t,o,e){"use strict";e.d(o,"d",(function(){return v})),e.d(o,"a",(function(){return b})),e.d(o,"c",(function(){return y}));e("4de4"),e("4160"),e("b64b"),e("d3b7"),e("159b");var a=e("ade3"),r=(e("99af"),e("bc3a")),s=e.n(r);s.a.defaults.baseURL="https://api.unsplash.com";var i,n,c=s.a,l="CLm726DrWmYpdLZNXqFca8gKfO7RZLWT6dtbzByYoNI",u=function(t,o){return c.get("/search/photos?client_id=".concat(l,"&query=").concat(t,"&orientation=").concat(o)).then((function(o){return o.data.results.forEach((function(o){o.LIKED=!1,o.QUERY=t})),o.data.results}))},h={searchPhotos:u},d=e("e8ec"),p=e("c99a");function f(t){for(var o=t.photos,e=t.liked,a=t.store,r=0;r<e.length;r++){for(var s=!1,i=0;i<o.length;i++)if(e[r].id===o[i].id){s=!0;break}s||a.unshift(e[r])}}var m={isLoading:!1,data:null,likedPhotos:{photos:[]},error:null},v={searchPhotosStart:"[searchPhotos] Search photos start",searchPhotosSuccess:"[searchPhotos] Search photos success",searchPhotosFailure:"[searchPhotos] Search photos failure",likePhotoStart:"[searchPhotos] Like photo start",likePhotoSuccess:"[searchPhotos] Like photo success",likePhotoFailure:"[searchPhotos] Like photo failure",getLocalStorageStart:"[searchPhotos] Initalize Local Storage start",getLocalStorageSuccess:"[searchPhotos] Initalize Local Storage success",getLocalStorageFailure:"[searchPhotos] Initalize Local Storage failure",oldQueryFavorites:"[searchPhotos] Add favorites from old query to state.data"},b={searchPhotos:"[searchPhotos] Search photos",likePhoto:"[searchPhotos] Like photos",getLocalStorage:"[searchPhotos] Initalize Local Storage"},y={favorites:"[searchPhotos] Favorites"},P=(i={},Object(a["a"])(i,v.searchPhotosStart,(function(t){t.isLoading=!0,t.error=null})),Object(a["a"])(i,v.searchPhotosSuccess,(function(t,o){t.isLoading=!1,t.data=o,t.data.photos.forEach((function(o){t.likedPhotos.photos.forEach((function(t){o.id===t.id&&(o.LIKED=!0)}))})),Object(d["c"])("lastQuery",t.data)})),Object(a["a"])(i,v.searchPhotosFailure,(function(t,o){t.error=o,t.isLoading=!1})),Object(a["a"])(i,v.likePhotoStart,(function(t){t.data||(t.data=t.likedPhotos)})),Object(a["a"])(i,v.likePhotoSuccess,(function(t,o){var e=t.data.photos.filter((function(t){return t.id===o.id}));e[0].LIKED?(t.likedPhotos.photos=t.likedPhotos.photos.filter((function(t){return t.id!==e[0].id})),e[0].LIKED=!e[0].LIKED,Object(d["b"])(e[0].id)):(e[0].LIKED=!e[0].LIKED,Object(d["c"])(e[0].id,e[0]),t.likedPhotos.photos.push(e[0]))})),Object(a["a"])(i,v.likePhotoFailure,(function(t,o){t.error=o})),Object(a["a"])(i,v.getLocalStorageStart,(function(){})),Object(a["a"])(i,v.getLocalStorageSuccess,(function(t){for(var o=Object.keys(localStorage),e=0,a=o;e<a.length;e++){var r=a[e],s=Object(d["a"])(r);s&&s.id===r&&t.likedPhotos.photos.push(s)}})),Object(a["a"])(i,v.getLocalStorageFailure,(function(){})),Object(a["a"])(i,v.oldQueryFavorites,(function(t){if(!t.data){var o=Object(d["a"])("lastQuery");t.data=o;var e=t.likedPhotos.photos,a=t.data.photos;f({liked:e,photos:a,store:t.data.photos})}var r=t.likedPhotos.photos,s=t.data.photos;f({liked:r,photos:s,store:t.data.photos})})),i),g=Object(a["a"])({},y.favorites,(function(t){return{photos:t.likedPhotos.photos}})),k=(n={},Object(a["a"])(n,b.searchPhotos,(function(t,o){var e=o.query,a=o.orientation;return new Promise((function(o){t.commit(v.searchPhotosStart),h.searchPhotos(e,a).then((function(r){var s={photos:r,query:e,orientation:a};t.commit(v.searchPhotosSuccess,s),t.dispatch(p["a"].putHistory,{query:e,orientation:a}),o(s)})).catch((function(o){console.error(o),t.commit(v.searchPhotosFailure,o)}))}))})),Object(a["a"])(n,b.likePhoto,(function(t,o){var e=o.id;return new Promise((function(){t.commit(v.likePhotoStart),e?t.commit(v.likePhotoSuccess,{id:e}):t.commit(v.likePhotoFailure,"no id of photo")}))})),Object(a["a"])(n,b.getLocalStorage,(function(t){t.commit(v.getLocalStorageStart),t.commit(v.getLocalStorageSuccess)})),n);o["b"]={state:m,actions:k,mutations:P,getters:g}},"56d7":function(t,o,e){"use strict";e.r(o);e("e260"),e("e6cf"),e("cca6"),e("a79d");var a=e("2b0e"),r=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("ph-navbar"),e("router-view")],1)},s=[],i=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("nav",{staticClass:"navbar navbar-expand-sm navbar-dark bg-dark"},[e("div",[e("ul",{staticClass:"navbar-nav mr-auto"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"home"},"active-class":"active",exact:""}},[t._v(" Home ")])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"favorites"},"active-class":"active"}},[t._v(" Favorites ")])],1),e("li",{staticClass:"nav-item",attrs:{"active-class":"active",exact:""}},[e("router-link",{staticClass:"nav-link",attrs:{to:{name:"history"},"active-class":"active"}},[t._v(" History ")])],1)])])])},n=[],c={name:"PhNavbar"},l=c,u=e("2877"),h=Object(u["a"])(l,i,n,!1,null,null,null),d=h.exports,p=e("0534"),f={name:"App",components:{PhNavbar:d},mounted:function(){this.$store.dispatch(p["a"].getLocalStorage)}},m=f,v=Object(u["a"])(m,r,s,!1,null,null,null),b=v.exports,y=(e("d3b7"),e("8c4f")),P=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("ph-search-form"),t.photos?e("ph-photos",{attrs:{photos:t.photos,"from-component":"Home"}}):t._e()],1)},g=[],k=e("5530"),S=e("2f62"),O=e("5fed"),j=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("form",{staticClass:"form-inline my-2",on:{submit:function(o){return o.preventDefault(),t.searchPhotos(o)}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control mx-2",attrs:{type:"search",placeholder:"Search","aria-label":"Search"},domProps:{value:t.search},on:{input:function(o){o.target.composing||(t.search=o.target.value)}}}),e("div",{staticClass:"form-check form-check-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.orientation,expression:"orientation"}],staticClass:"form-check-input",attrs:{type:"radio",name:"orientation",id:"landscape",value:"landscape"},domProps:{checked:t._q(t.orientation,"landscape")},on:{change:function(o){t.orientation="landscape"}}}),e("label",{staticClass:"form-check-label",attrs:{for:"landscape"}},[t._v("Landscape")])]),e("div",{staticClass:"form-check form-check-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.orientation,expression:"orientation"}],staticClass:"form-check-input",attrs:{type:"radio",name:"orientation",id:"portrait",value:"portrait"},domProps:{checked:t._q(t.orientation,"portrait")},on:{change:function(o){t.orientation="portrait"}}}),e("label",{staticClass:"form-check-label",attrs:{for:"portrait"}},[t._v("Portrait")])]),e("div",{staticClass:"form-check form-check-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.orientation,expression:"orientation"}],staticClass:"form-check-input",attrs:{type:"radio",name:"orientation",id:"squarish",value:"squarish"},domProps:{checked:t._q(t.orientation,"squarish")},on:{change:function(o){t.orientation="squarish"}}}),e("label",{staticClass:"form-check-label",attrs:{for:"squarish"}},[t._v("Squarish")])]),e("button",{staticClass:"btn btn-outline-success mx-2 my-2",attrs:{type:"submit"}},[t._v(" Search ")])])},_=[],w=(e("99af"),e("ac1f"),e("841c"),{name:"PhSearchForm",data:function(){return{search:"",orientation:"landscape"}},methods:{searchPhotos:function(){var t="".concat(this.search,"-").concat(this.orientation);if(this.$route.params.query!==t&&this.search){var o={query:this.search,orientation:this.orientation};this.$store.dispatch(p["a"].searchPhotos,o),this.$router.push({name:"results",params:{query:t}})}}}}),L=w,C=Object(u["a"])(L,j,_,!1,null,null,null),q=C.exports,H={name:"PhHome",components:{PhPhotos:O["a"],PhSearchForm:q},computed:Object(k["a"])({},Object(S["c"])({photos:function(t){return t.searchPhotos.data},error:function(t){return t.searchPhotos.error}}))},x=H,E=Object(u["a"])(x,P,g,!1,null,null,null),I=E.exports;a["a"].use(y["a"]);var F=[{path:"/",name:"home",component:I},{path:"/results/:query",name:"results",component:I},{path:"/favorites",name:"favorites",component:function(){return e.e("about").then(e.bind(null,"48d5"))}},{path:"/history",name:"history",component:function(){return e.e("about").then(e.bind(null,"e4bb"))}}],D=new y["a"]({mode:"history",base:"/vuejs-app-search-photo/",routes:F}),N=D,$=e("c99a");a["a"].use(S["a"]);var z=new S["a"].Store({state:{},mutations:{},actions:{},modules:{searchPhotos:p["b"],history:$["b"]}});e("a347");a["a"].config.productionTip=!1,new a["a"]({router:N,store:z,render:function(t){return t(b)}}).$mount("#app")},"5fed":function(t,o,e){"use strict";var a=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"row row-cols-1 row-cols-md-2"},t._l(t.photos.photos,(function(o){return e("div",{directives:[{name:"show",rawName:"v-show",value:t.show(o,t.photos),expression:"show(photo, photos)"}],key:o.id,staticClass:"col mb-4",class:{liked:o.LIKED}},[e("div",{staticClass:"card"},[e("div",{staticClass:"controls"},[e("button",{staticClass:"like__button",attrs:{title:"Like photo",type:"button"},on:{click:function(e){return t.likePhoto(o.id)}}},[e("svg",{staticClass:"like__icon",attrs:{version:"1.1",viewBox:"0 0 32 32"}},[e("path",{attrs:{d:"M17.4 29c-.8.8-2 .8-2.8 0l-12.3-12.8c-3.1-3.1-3.1-8.2 0-11.4 3.1-3.1 8.2-3.1 11.3 0l2.4 2.8 2.3-2.8c3.1-3.1 8.2-3.1 11.3 0 3.1 3.1 3.1 8.2 0 11.4l-12.2 12.8z"}})])]),e("a",{staticClass:"download__link",attrs:{download:"",title:"Download photo",href:o.links.download+"?force=true",target:"_blank"}},[e("svg",{staticClass:"download__icon",attrs:{version:"1.1",viewBox:"0 0 32 32"}},[e("path",{attrs:{d:"M25.8 15.5l-7.8 7.2v-20.7h-4v20.7l-7.8-7.2-2.7 3 12.5 11.4 12.5-11.4z"}})])])]),e("img",{staticClass:"card-img-top",attrs:{src:o.urls.regular,alt:o.alt_description}}),e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v(t._s(o.alt_description))]),e("p",{staticClass:"card-text"},[t._v(" "+t._s(o.description)+" ")])])])])})),0)},r=[],s=e("0534"),i={name:"PhPhotos",props:{photos:{type:Object,required:!0},fromComponent:{type:String,required:!0}},methods:{show:function(t,o){return"Home"===this.fromComponent?t.QUERY===o.query:"Favorites"===this.fromComponent||void 0},likePhoto:function(t){this.$store.dispatch(s["a"].likePhoto,{id:t})}}},n=i,c=e("2877"),l=Object(c["a"])(n,a,r,!1,null,null,null);o["a"]=l.exports},a347:function(t,o,e){},c99a:function(t,o,e){"use strict";e.d(o,"a",(function(){return l}));e("a434");var a,r,s=e("ade3"),i=e("e8ec"),n={history:[]},c={initHistory:"[history] Initialize history",putHistory:"[history] Put history",removeHistory:"[history] Remove history",removeAllHistory:"[history] Remove all history"},l={putHistory:"[history] Put history action",initHistory:"[history] Initialize history action",removeHistory:"[history] Remove history action",removeAllHistory:"[history] Remove all history action"},u=(a={},Object(s["a"])(a,c.putHistory,(function(t,o){var e=Object(i["a"])("queryParams");console.log(e);var a=!1;if(e){for(var r=0;r<e.length;r++)if(e[r].query===o.query&&e[r].orientation===o.orientation){a=!0;break}a||(t.history.push(o),Object(i["c"])("queryParams",t.history))}else t.history.push(o),Object(i["c"])("queryParams",t.history)})),Object(s["a"])(a,c.initHistory,(function(t){var o=Object(i["a"])("queryParams");t.history=o})),Object(s["a"])(a,c.removeHistory,(function(t,o){var e=Object(i["a"])("queryParams");e.splice(o,1),t.history=e,Object(i["c"])("queryParams",t.history),0===t.history.length&&Object(i["b"])("queryParams")})),Object(s["a"])(a,c.removeAllHistory,(function(){Object(i["b"])("queryParams"),n.history=[]})),a),h=(r={},Object(s["a"])(r,l.putHistory,(function(t,o){var e=t.commit;e(c.putHistory,o)})),Object(s["a"])(r,l.initHistory,(function(t){var o=t.commit;o(c.initHistory)})),Object(s["a"])(r,l.removeHistory,(function(t,o){var e=t.commit;e(c.removeHistory,o)})),Object(s["a"])(r,l.removeAllHistory,(function(t){var o=t.commit;o(c.removeAllHistory)})),r);o["b"]={state:n,mutations:u,actions:h}},e8ec:function(t,o,e){"use strict";e.d(o,"a",(function(){return a})),e.d(o,"c",(function(){return r})),e.d(o,"b",(function(){return s}));var a=function(t){try{return JSON.parse(localStorage.getItem(t))}catch(o){console.log("Error getting data in localStorage",o)}},r=function(t,o){try{localStorage.setItem(t,JSON.stringify(o))}catch(e){console.log("Error saving data in localStorage",e)}},s=function(t){try{localStorage.removeItem(t)}catch(o){console.log("Error removing data in localStorage",o)}}}});
//# sourceMappingURL=app.88b954e7.js.map